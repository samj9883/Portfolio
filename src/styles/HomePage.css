/* ---- Global ---- */
:root {
  --carousel-min-h: 50vh;  /* at least half the viewport height */
}

:where(html, body, #root) {
  margin: 0 !important;
  padding: 0 !important;
  width: 100%;
}

html, body { overflow-x: clip; }

/* Header */
.app-header { padding: 12px 0 8px; position: relative; z-index: 5; }
.header-grid {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 12px;
}
.brand h1 {
  text-align: center;
  font-weight: 800;
  line-height: .95;
  letter-spacing: .01em;
  font-size: clamp(1.8rem, 6.6vw, 4rem);
  text-transform: uppercase;
  color: var(--c-text);
}

.name h3 { color: var(--c-accent); text-align: center; }
.theme-toggle { justify-self: end; }

.subnav {
  grid-column: 1 / -1;
  display: flex;
  gap: .75rem;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: .6rem;
}
.subnav .nav-pill {
  display: inline-flex;
  align-items: center;
  gap: .45rem;
  height: 2.25rem;
  padding: 0 .95rem;
  border-radius: 9999px;
  font-weight: 600;
  line-height: 1;
  text-decoration: none;
}
.subnav .theme-pill.btn-outline {
  background: transparent;
  color: var(--c-text);
  border: 1.5px solid var(--c-text, currentColor);
}
.subnav .nav-pill svg { display: block; flex: 0 0 auto; }

/* Band & tagline */
.band {
  margin-top: 18px;
  position: relative;
  isolation: isolate; /* keep stacking clean */
  background: var(--c-bg);
  z-index: 1;
}
.band-inner { display: grid; gap: 16px; }

.message {
  background: var(--c-bg);
  padding: 0 0 56px;
  display: grid;
  justify-items: center;
  position: relative;
  z-index: 1;
}
.message .tagline {
  max-width: 70ch;
  padding: 0 20px;
  margin: 10px auto 0;
  text-align: center;
  color: var(--c-text);
  font-weight: 600;
}

/* ---------------- Carousel (content-driven height) ---------------- */
.carousel {
  position: relative;
  perspective: 1200px;
  overflow: visible;                /* do not clip images/content */
  min-height: var(--carousel-min-h);
  z-index: 2;
}

.carousel-track {
  position: relative;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  gap: 1rem;
  height: auto;                     /* follow content */
}

/* Base card stack: absolute so they overlap;
   center card becomes relative so it defines height */
.carousel .card {
  background: var(--c-muted);
  border: var(--c-muted);
  width: min(450px, 50%);
  margin-inline: auto;
  opacity: 0;
  pointer-events: none;
  transition: transform 550ms var(--transition), opacity 550ms var(--transition), box-shadow 550ms var(--transition);
  z-index: 1;
  height: auto;
  display: flex;
  flex-direction: column;
  position: absolute;               /* stacked by default */
  inset: 0;
  border-radius: 24px;
  overflow: hidden;

}

.carousel .card.is-center {
  color: var(--c-bg);
  background-color: var(--c-text);
  transform: translateX(0) scale(1);
  opacity: 1;
  pointer-events: auto;
  z-index: 2;
  border: none;
  box-shadow: 0 0 0 3px var(--c-bg), var(--shadow-md);
  position: relative;               /* <-- participates in layout height */
  overflow: visible;                /* no clipping inside card */

}

.carousel .card.is-left {
  color: var(--c-bg);
  background-color: var(--c-muted);
  transform: translateX(-28%) rotateY(8deg) scale(.9);
  opacity: 1;
  z-index: 1;
}
.carousel .card.is-right {
  color: var(--c-bg);
  background-color: var(--c-muted);
  transform: translateX(28%) rotateY(-8deg) scale(.9);
  opacity: 1;
  z-index: 1;

}

/* Visual section: natural height, centered content */
.card-visual {
  flex: 0 0 auto;
  display: grid;
  place-items: center;
  overflow: visible;                /* show full image if taller */
  background: linear-gradient(180deg, rgba(0,0,0,.06), rgba(0,0,0,.02));
}

/* Images scale by width, keep aspect ratio */
.card-visual img {
  display: block;
  width: min(90%, 520px);           /* responsive width cap */
  height: auto;                     /* natural height -> no crop */
  max-width: 100%;
  object-fit: contain;
  padding: 20px;
}

/* Text section grows naturally; will push carousel height */
.card-content {
  flex: 0 0 auto;
  padding: 1rem 1rem 1.2rem;
  display: flex;
  flex-direction: column;
}

.card-content h3 {
  font-weight: 800;
  font-size: clamp(1.25rem, 3.4vw, 1.8rem);
  margin: 0 0 .25rem;
}
.card-content p {
  color: var(--c-muted);
  font-weight: 500;
  margin: 0;
  flex: 1 1 auto;
}
.actions {
  display: flex;
  flex-wrap: wrap;
  gap: .6rem;
  margin-top: .6rem;
}

/* Dots below the cards (always visible) */
.controls {
  position: relative;
  display: flex;
  justify-content: center;
  gap: .45rem;
  width: 100%;
  margin: 12px 0 8px;
  z-index: 3;                       /* above any overlapping visuals */
}
.controls .dot:hover { scale: 1.5; }
.controls .dot {
  background-color: var(--c-text);
  width: 20px;
  height: 10px;
  cursor: pointer;
  border-radius: 6px;
  border: none;
}
.controls .dot.is-current { background-color: var(--c-accent); }

/* Mobile tweaks */
@media (max-width: 600px) {
  .actions .btn { padding: .6rem .9rem; }
  .carousel .card.is-left  { transform: translateX(-20%) rotateY(6deg) scale(.92); }
  .carousel .card.is-right { transform: translateX(20%)  rotateY(-6deg) scale(.92); }

  .carousel .card { width: min(340px, 90vw); border-radius: 22px; }
  .card-visual img { padding: 16px; width: min(92%, 420px); }

  .card-content h3 { font-size: 1.1rem; margin: 0 0 .25rem; line-height: 1.1; }
  .card-content p  { font-size: .95rem; line-height: 1.4; margin: 0; }

  .actions { gap: .5rem; }
  .actions .btn { padding: .5rem .9rem; font-size: .95rem; box-shadow: var(--shadow-sm); }

  .controls .dot { width: 9px; height: 9px; }
}
